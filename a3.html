<html>
<head><title>Decision Tree</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="json2.js"></script>
<script type="text/javascript" src="jquery.treeview.js"></script>
<link type="text/css" href="jquery.treeview.css" rel="stylesheet" />
</head>
<body>

<script type="text/javascript">
var worker = new Worker("dt.js");

worker.onmessage = function(event) {
	var resultObj = JSON.parse(event.data);
	//console.log(resultObj);
	if(resultObj.do == undefined){
		//console.log(resultObj);
	}
	else{
		switch(resultObj.do){
			case "debug":
				//console.log(resultObj.data);
				break;
			case "tree":
				$("#tree").html(draw(resultObj.data));
				$("#tree").treeview();
				//console.log(resultObj.data);
				break;
			case "stats":
				$("#stats").append("<p>"+resultObj.data+"<\/p>");
				break;
		}
		
		
	}
	//console.log(event.data);
};
worker.onerror = function(error) {
	//console.log(error.message);
};

function load_data(url,question){
	$("#question").html('<p>'+question+'</p>');
	$("#stats").empty();
	$("#tree").html("Working... please wait");
	$.get(url, function(data){
		worker.postMessage(data);
	});
}

function draw(data, root){
	var result = "<ul>";
 	for(var i = 0;i<data.children.length;i++){
 		result += "<li><span>"+data.children[i].name+"<\/span>" + draw(data.children[i]) + "<\/li>";
 	}
 	result += "<\/ul>";
 	return result;
}

</script>
<button onclick="load_data('datasets/weather_nominal_data.txt','Should I bring an umbrella?');">Weather (nominal)</button>
<button onclick="load_data('datasets/weather_numeric_data.txt','Should I bring an umbrella?');">Weather (numeric)</button>
<button onclick="load_data('datasets/vote_data.txt','Who should I vote for?');">Vote</button>
<button onclick="load_data('datasets/mushroom_data.txt','What kind of mushroom am I looking at?');">Mushroom</button>
<button onclick="load_data('datasets/labor_data.txt','Is this labor negotiation good or bad?');">Labor</button>

<div id="explanation" style="float:right;width:50%;">
<h2>Purpose</h2>
<p>The goal of this assignment was to create an application that would take factual data, and create a decision tree that can be used to make a decision. The data is divided into two groups at random, half is used to train the decision tree, and half is used to test the decision tree. Assorted data was provided to test the process.</p>
<h2>Decision Trees</h2>
<p>A decision tree can be used to assist in making a decision. The root of a tree is a question and each branch a potential answer. In other words, and automatically generated flow chart.</p>
</div>
<div id="question"></div>
<h2>Decision Tree:</h2>
<ul id="tree"><li style="list-style-type:none;">Select data to be loaded above.</li></ul>
<div id="stats"></div>
</body>
</html>